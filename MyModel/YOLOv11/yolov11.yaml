# Ultralytics YOLO ğŸš€, AGPL-3.0 license
# YOLO11 object detection model with P3-P5 outputs. For Usage examples see https://docs.ultralytics.com/tasks/detect
 
# Parameters
nc: 80 # number of classes
# æ•°æ®é›†çš„ç±»åˆ«æ•°ï¼Œæˆ‘ä»¬é»˜è®¤çš„æ•°æ®COCOæ˜¯80ç±»åˆ«ï¼ˆYOLOv8æä¾›çš„æƒé‡ä¹Ÿæ˜¯ç”±æ­¤æ•°æ®é›†è®­ç»ƒå‡ºæ¥çš„ï¼‰ï¼Œæœ‰çš„è¯»è€…å–œæ¬¢ä¿®æ”¹ncæ­¤å¤„å…¶å®ä¸éœ€è¦ä¿®æ”¹ï¼Œ
# æ¨¡å‹ä¼šè‡ªåŠ¨æ ¹æ®æˆ‘ä»¬æ•°æ®é›†çš„yamlæ–‡ä»¶è·å–æ­¤å¤„çš„æ•°é‡ï¼ŒåŒæ—¶æˆ‘ä»¬8.1ç‰ˆæœ¬ä¹‹å‰çš„ultralyticsä»“åº“æ‰“å°ä¸¤è¾¹çš„ç½‘ç»œç»“æ„ï¼Œå”¯ä¸€çš„åŒºåˆ«å°±æ˜¯ncçš„æ•°é‡ä¸ä¸€æ ·ï¼ˆå®é™…è¿è¡Œçš„æ˜¯ç¬¬äºŒéçš„ç½‘ç»œç»“æ„ï¼‰ã€‚
 
scales: # model compound scaling constants, i.e. 'model=yolo11n.yaml' will call yolo11.yaml with scale 'n'
  # æ­¤å¤„çš„å«ä¹‰å¤§æ¦‚å°±æ˜¯å¦‚æœæˆ‘ä»¬åœ¨è®­ç»ƒçš„æŒ‡ä»¤æ—¶å€™ä½¿ç”¨model=yolov10.yaml åˆ™å¯¹åº”çš„æ˜¯v10nï¼Œå¦‚æœä½¿ç”¨model=yolov10s.yamlåˆ™å¯¹åº”çš„æ˜¯v8s
  # å½“ç„¶äº†å¤§å®¶å¦‚æœä¸æƒ³ä½¿ç”¨ä¸Šé¢çš„æ–¹å¼æŒ‡å®šæ¨¡å‹ï¼Œæˆ‘ä»¬åªéœ€è¦å°†ä¸‹é¢æƒ³è¦ä½¿ç”¨çš„æ¨¡å‹ç§»åˆ°æœ€å‰ç«¯å³å¯ï¼Œæˆ–è€…å°†å…¶ä½™ä¸æƒ³ç”¨çš„æ³¨é‡Šæ‰éƒ½å¯ä»¥ã€‚
  # [depth, width, max_channels]
  # depth æ¨¡å‹çš„æ·±åº¦  width æ¨¡å‹çš„å®½åº¦  max_channelsæ¨¡å‹æœ€å¤§çš„é€šé“æ•°
  # è¿™ä¸‰ä¸ªå‚æ•°å…±åŒå†³å®šæ¨¡å‹çš„å¤§å°ï¼Œå…¶ä¸­depthä¸»è¦æ˜¯å’Œä¸‹é¢é…ç½®æ–‡ä»¶éƒ¨åˆ†çš„repeatsè¿›è¡Œä¸€ä¸ªè®¡ç®—æ¥ç¡®å®šå…¶ä¸­æ¨¡å—çš„ä¸²è”æ•°é‡
  # width ä¸»è¦æ˜¯ å’Œargsçš„ç¬¬ä¸€ä¸ªå‚æ•°é€šé“æ•°è¿›è¡Œè®¡ç®—æ¥ç®—å‡ºæ¨¡å‹ä¸åŒå±‚çš„é€šé“æ•°, ä½†æ˜¯é€šé“æ•°ä¸èƒ½è¶…è¿‡max_channels.
  # å¤§æ¦‚ä»‹ç»ä¸€ä¸‹é€šé“æ•°æ˜¯ä»€ä¹ˆ, æˆ‘ä»¬è¾“å…¥æ¨¡å‹çš„tensorå½¢çŠ¶ä¸º[batch_size, é€šé“æ•°, å›¾ç‰‡å®½, å›¾ç‰‡é«˜]
  # é€šé“æ•°å°±æ˜¯tensorçš„ç¬¬äºŒä¸ªå‚æ•°,å¦‚æœæˆ‘ä»¬å¿½ç•¥batch_size, é‚£ä¹ˆå¯ä»¥ç†è§£ä¸ºé€šé“æ•°å¼ äºŒç»´å›¾ç‰‡å †å åœ¨ä¸€èµ·, batch_sizeä¸ºå¤šå°‘å † æ¯ä¸€å †æœ‰é€šé“æ•°å¼ äºŒç»´å›¾ç‰‡å †å åœ¨ä¸€èµ·.
  # æ¯ä¸€ä¸ªç‰ˆæœ¬åé¢æœ‰æ¯ä¸€ä¸ªç‰ˆæœ¬çš„å±‚æ•° å‚æ•°é‡ç­‰æŒ‡æ ‡
  n: [0.50, 0.25, 1024] # summary: 319 layers, 2624080 parameters, 2624064 gradients, 6.6 GFLOPs
  s: [0.50, 0.50, 1024] # summary: 319 layers, 9458752 parameters, 9458736 gradients, 21.7 GFLOPs
  m: [0.50, 1.00, 512] # summary: 409 layers, 20114688 parameters, 20114672 gradients, 68.5 GFLOPs
  l: [1.00, 1.00, 512] # summary: 631 layers, 25372160 parameters, 25372144 gradients, 87.6 GFLOPs
  x: [1.00, 1.50, 512] # summary: 631 layers, 56966176 parameters, 56966160 gradients, 196.0 GFLOPs
 
# YOLO11n backbone
backbone:
  # è¿™é‡Œéœ€è¦å¤šä»‹ç»ä¸€ä¸‹ï¼Œfrom, repeats, module, args
  # from æ­¤å¤„æœ‰ä¸‰ç§å¯èƒ½çš„å€¼åˆ†åˆ«æ˜¯ -1ã€å…·ä½“çš„æ•°å€¼ã€listå­˜æ”¾æ•°å€¼ã€‚åˆ†åˆ«å«ä¹‰å¦‚ä¸‹  (1)ã€-1çš„å«ä¹‰å°±æ˜¯ä»£è¡¨æ­¤å±‚çš„è¾“å…¥å°±æ˜¯ä¸Šä¸€å±‚çš„è¾“å‡ºï¼Œ
  #                                                                (2)ã€å¦‚æœæ˜¯å…·ä½“çš„æŸä¸ªæ•°å­—æ¯”å¦‚4é‚£ä¹ˆåˆ™ä»£è¡¨æœ¬å±‚çš„è¾“å…¥æ¥è‡ªäºæ¨¡å‹çš„ç¬¬å››å±‚ï¼Œ
  #                                                                (3)ã€æœ‰çš„å±‚æ˜¯listå­˜æ”¾ä¸¤ä¸ªå€¼ä¹Ÿå¯èƒ½æ˜¯å¤šä¸ªå€¼ï¼Œåˆ™ä»£è¡¨å¯¹åº”ä¸¤ä¸ªå€¼çš„è¾“å‡ºä¸ºæœ¬å±‚çš„è¾“å…¥
  # repeats è¿™ä¸ªå‚æ•°æ˜¯ä¸ºäº†C2fè®¾ç½®çš„å…¶å®ƒçš„æ¨¡å—éƒ½ç”¨ä¸åˆ°ï¼Œä»£è¡¨ç€C2få½“ä¸­Bottlenecké‡å¤çš„æ¬¡æ•°ï¼Œæ¯”å¦‚å½“æˆ‘ä»¬çš„æ¨¡å‹ç”¨çš„æ˜¯lçš„æ—¶å€™ï¼Œé‚£ä¹ˆrepeats=2é‚£ä¹ˆåˆ™ä»£è¡¨C3k2å½“ä¸­çš„Bottleneckä¸²è¡Œ2ä¸ªã€‚
  # module æ­¤å¤„åˆ™ä»£è¡¨æ¨¡å‹çš„åç§°
  # args æ­¤å¤„ä»£è¡¨è¾“å…¥åˆ°å¯¹åº”æ¨¡å—çš„å‚æ•°ï¼Œæ­¤å¤„å’Œparse_modelå‡½æ•°ä¸­çš„å®šä¹‰æ–¹æ³•æœ‰å…³ï¼Œå¯¹äºC3k2æ¥è¯´ä¼ å…¥çš„å‚æ•°->ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸Šä¸€ä¸ªæ¨¡å‹çš„è¾“å‡ºé€šé“æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯argsçš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œç„¶åä»¥æ­¤ç±»æ¨ã€‚
  # [from, repeats, module, args]
  - [-1, 1, Conv, [64, 3, 2]] # 0-P1/2
  - [-1, 1, Conv, [128, 3, 2]] # 1-P2/4
  - [-1, 2, C3k2, [256, False, 0.25]]
  - [-1, 1, Conv, [256, 3, 2]] # 3-P3/8
  - [-1, 2, C3k2, [512, False, 0.25]]
  - [-1, 1, Conv, [512, 3, 2]] # 5-P4/16
  - [-1, 2, C3k2, [512, True]]
  - [-1, 1, Conv, [1024, 3, 2]] # 7-P5/32
  - [-1, 2, C3k2, [1024, True]]
  - [-1, 1, SPPF, [1024, 5]] # 9
  - [-1, 2, C2PSA, [1024]] # 10
 
# YOLO11n head
head:
  - [-1, 1, nn.Upsample, [None, 2, "nearest"]]
  - [[-1, 6], 1, Concat, [1]] # cat backbone P4
  - [-1, 2, C3k2, [512, False]] # 13
 
  - [-1, 1, nn.Upsample, [None, 2, "nearest"]]
  - [[-1, 4], 1, Concat, [1]] # cat backbone P3
  - [-1, 2, C3k2, [256, False]] # 16 (P3/8-small)
 
  - [-1, 1, Conv, [256, 3, 2]]
  - [[-1, 13], 1, Concat, [1]] # cat head P4
  - [-1, 2, C3k2, [512, False]] # 19 (P4/16-medium)
 
  - [-1, 1, Conv, [512, 3, 2]]
  - [[-1, 10], 1, Concat, [1]] # cat head P5
  - [-1, 2, C3k2, [1024, True]] # 22 (P5/32-large)
 
  - [[16, 19, 22], 1, Detect, [nc]] # Detect(P3, P4, P5)